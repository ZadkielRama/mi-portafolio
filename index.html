<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ezequiel Ramírez · Desarrollador .NET</title>
  <meta name="description" content="Portafolio moderno de Ezequiel Ramírez – Desarrollador .NET/Blazor, APIs y Azure. Proyectos, skills y contacto." />
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Tipografía básica (opcional): Inter-like fallback */
    :root { --radius: 1.25rem; }
  </style>
<script>
  (function () {
    const saved = localStorage.getItem('theme') || 'system';
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
    function apply(theme){
      const root = document.documentElement;
      if (theme === 'dark' || (theme === 'system' && prefersDark.matches)) {
        root.classList.add('dark');
      } else {
        root.classList.remove('dark');
      }
    }
    apply(saved);
    if (saved === 'system') {
      prefersDark.addEventListener('change', () => apply('system'));
    }
  })();
</script>

</head>
<body class="min-h-screen bg-white text-neutral-900 dark:bg-neutral-950 dark:text-neutral-100 selection:bg-blue-200/60 selection:text-blue-900">
  <!-- NAV -->
  <header class="sticky top-0 z-50 backdrop-blur bg-white/70 dark:bg-neutral-900/70 border-b border-black/10 dark:border-white/10">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex h-16 items-center justify-between">
        <a href="#home" class="flex items-center gap-2 font-semibold tracking-tight">
          <span class="inline-block size-3 rounded-full bg-gradient-to-tr from-blue-600 to-cyan-400"></span>
          <span>Ezequiel Ramírez</span>
        </a>
        <nav class="hidden md:flex items-center gap-6 text-sm">
          <!-- Botón tema -->
    <div class="relative" id="theme-menu">
        <button id="theme-btn" type="button"
        class="inline-flex items-center gap-2 rounded-full border border-black/10 dark:border-white/10 px-3 py-2 text-sm
        hover:bg-black/5 dark:hover:bg-white/10 transition">
    <!-- Ícono activo (se cambia por JS) -->
    <span id="theme-icon" class="inline-block">
      <!-- Sol por defecto -->
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-5 w-5"><path fill="currentColor" d="M12 18a6 6 0 1 0 0-12a6 6 0 0 0 0 12m0 4a1 1 0 0 1-1-1v-1a1 1 0 1 1 2 0v1a1 1 0 0 1-1 1M5.64 18.36a1 1 0 0 1-1.41-1.41l.71-.71a1 1 0 0 1 1.41 1.41zm12.02 0l-.71-.71a1 1 0 1 1 1.41-1.41l.71.71a1 1 0 1 1-1.41 1.41M3 13H2a1 1 0 1 1 0-2h1a1 1 0 1 1 0 2m19 0h-1a1 1 0 1 1 0-2h1a1 1 0 1 1 0 2M5.64 5.64a1 1 0 0 1 1.41 0l.71.71A1 1 0 0 1 6.35 7.76l-.71-.71a1 1 0 0 1 0-1.41m12.02 0a1 1 0 0 1 0 1.41l-.71.71a1 1 0 1 1-1.41-1.41l.71-.71a1 1 0 0 1 1.41 0M13 3v1a1 1 0 1 1-2 0V3a1 1 0 1 1 2 0"/></svg>
    </span>
    <span id="theme-label" class="hidden sm:inline">Tema</span>
    <svg class="h-4 w-4 opacity-60" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.23 7.21a.75.75 0 0 1 1.06.02L10 10.94l3.71-3.71a.75.75 0 0 1 1.08 1.04l-4.25 4.25a.75.75 0 0 1-1.08 0L5.21 8.27a.75.75 0 0 1 .02-1.06z" clip-rule="evenodd"/></svg>
  </button>

  <!-- Dropdown -->
  <div id="theme-list"
       class="invisible opacity-0 pointer-events-none absolute right-0 mt-2 w-44 rounded-xl border border-black/10 dark:border-white/10
              bg-white dark:bg-neutral-900 shadow-xl transition [--dur:120ms] duration-[var(--dur)]">
    <button data-theme="light" class="w-full flex items-center gap-3 px-3 py-2 text-sm hover:bg-black/5 dark:hover:bg-white/10 rounded-t-xl">
      <!-- sol -->
      <svg class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M12 18a6 6 0 1 0 0-12a6 6 0 0 0 0 12Z"/></svg>
      Claro
    </button>
    <button data-theme="dark" class="w-full flex items-center gap-3 px-3 py-2 text-sm hover:bg-black/5 dark:hover:bg-white/10">
      <!-- luna -->
      <svg class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M21 12.79A9 9 0 1 1 11.21 3A7 7 0 0 0 21 12.79Z"/></svg>
      Oscuro
    </button>
    <button data-theme="system" class="w-full flex items-center gap-3 px-3 py-2 text-sm hover:bg-black/5 dark:hover:bg-white/10 rounded-b-xl">
      <!-- laptop -->
      <svg class="h-4 w-4" viewBox="0 0 24 24" fill="currentColor"><path d="M4 6h16v9H4zM2 18h20v2H2z"/></svg>
      Sistema
    </button>
  </div>
</div>

        </nav>
        <button id="menuBtn" class="md:hidden p-2 rounded-lg border border-gray-300 hover:border-blue-500 dark:border-neutral-700" aria-label="Abrir menú">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="size-5" fill="none" stroke="currentColor" stroke-width="1.8"><path d="M4 6h16M4 12h16M4 18h16"/></svg>
        </button>
      </div>

      <!-- Menú mobile -->
      <div id="mobileMenu" class="md:hidden hidden pb-4">
        <div class="flex flex-col gap-2 text-sm">
          <a href="#about" class="px-2 py-2 rounded hover:bg-gray-100 dark:hover:bg-neutral-800/70">Sobre mí</a>
          <a href="#skills" class="px-2 py-2 rounded hover:bg-gray-100 dark:hover:bg-neutral-800/70">Skills</a>
          <a href="#projects" class="px-2 py-2 rounded hover:bg-gray-100 dark:hover:bg-neutral-800/70">Proyectos</a>
          <a href="#contact" class="px-2 py-2 rounded hover:bg-gray-100 dark:hover:bg-neutral-800/70">Contacto</a>
          <a href="#cv" class="px-2 py-2 rounded border border-gray-300 dark:border-neutral-700 text-center hover:border-blue-500">Descargar CV</a>
        </div>
      </div>
    </div>
  </header>

  <!-- HERO -->
  <section id="home" class="relative overflow-hidden">
    <div class="absolute inset-0 -z-10">
      <div class="absolute -top-24 right-[-10%] h-72 w-72 md:h-[28rem] md:w-[28rem] rounded-full blur-3xl bg-gradient-to-br from-blue-500/30 via-sky-400/30 to-cyan-300/30"></div>
      <div class="absolute -bottom-24 left-[-10%] h-72 w-72 md:h-[28rem] md:w-[28rem] rounded-full blur-3xl bg-gradient-to-tr from-indigo-400/20 via-blue-300/20 to-cyan-200/20"></div>
    </div>
    <div class="max-w-6xl mx-auto px-4 pt-16 pb-10 md:pt-24 md:pb-16">
      <div class="grid md:grid-cols-12 gap-8 items-center">
        <div class="md:col-span-7 space-y-6">
          <p class="inline-flex items-center gap-2 text-xs font-medium px-3 py-1 rounded-full bg-blue-50 text-blue-700 border border-blue-200 dark:bg-blue-900/30 dark:text-blue-300 dark:border-blue-800">
            <span class="inline-block size-2 rounded-full bg-blue-600"></span>
            Disponible para proyectos freelance
          </p>
          <h1 class="text-4xl md:text-5xl font-extrabold leading-tight">
            Construyo experiencias web con <span class="bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-cyan-500">.NET & Blazor</span>
          </h1>
          <p class="text-gray-600 dark:text-gray-300 text-lg max-w-2xl">
            Soy desarrollador full‑stack con foco en APIs, Blazor, SQL y Azure. Me gusta crear productos <em>BBB</em>: Buenos, Bonitos y Baratos, priorizando rendimiento y UX.
          </p>
          <div class="flex flex-wrap gap-3">
            <a href="#projects" class="inline-flex items-center gap-2 rounded-full bg-blue-600 text-white px-5 py-3 hover:bg-blue-700 transition-colors">
              Ver proyectos
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="size-4" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M13 5l7 7-7 7"/></svg>
            </a>
            <a href="#contact" class="inline-flex items-center gap-2 rounded-full border border-gray-300 dark:border-gray-600 px-5 py-3 hover:border-blue-500 hover:text-blue-700 dark:hover:text-blue-400 transition-colors">
              Hablemos
            </a>
          </div>
          <div class="flex items-center gap-4 pt-2">
            <div class="flex -space-x-2">
              <img alt="avatar" class="size-8 rounded-full border-2 border-white dark:border-gray-800" src="https://api.dicebear.com/9.x/thumbs/svg?seed=Ezequiel" />
              <img alt="avatar" class="size-8 rounded-full border-2 border-white dark:border-gray-800" src="https://api.dicebear.com/9.x/thumbs/svg?seed=Cliente1" />
              <img alt="avatar" class="size-8 rounded-full border-2 border-white dark:border-gray-800" src="https://api.dicebear.com/9.x/thumbs/svg?seed=Cliente2" />
            </div>
            <p class="text-sm text-gray-600 dark:text-gray-400">+5 años construyendo soluciones para pymes y retail</p>
          </div>
        </div>
        <div class="md:col-span-5">
          <div class="aspect-square rounded-[var(--radius)] border border-gray-200 dark:border-gray-800 bg-gradient-to-br from-white to-gray-50 dark:from-gray-900 dark:to-gray-800 shadow-sm p-4">
            <div class="h-full w-full rounded-[calc(var(--radius)-0.5rem)] grid place-items-center bg-[radial-gradient(ellipse_at_top,rgba(59,130,246,0.15),transparent_60%)]">
              <div class="grid gap-3 text-sm">
                <div class="flex items-center gap-2">
                  <span class="size-2 rounded-full bg-emerald-500"></span>
                  <span>Deploys baratos: GitHub Pages / Netlify</span>
                </div>
                <div class="flex items-center gap-2">
                  <span class="size-2 rounded-full bg-blue-500"></span>
                  <span>Stack: .NET · Blazor · EF · SQL · Azure</span>
                </div>
                <div class="flex items-center gap-2">
                  <span class="size-2 rounded-full bg-amber-500"></span>
                  <span>Frontend: Tailwind · HTML · JS</span>
                </div>
                <div class="flex items-center gap-2">
                  <span class="size-2 rounded-full bg-fuchsia-500"></span>
                  <span>Integraciones: Mercado Libre, Shopify, Odoo</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SOBRE MÍ -->
  <section id="about" class="py-16 md:py-24">
    <div class="max-w-6xl mx-auto px-4">
      <div class="grid md:grid-cols-12 gap-10">
        <div class="md:col-span-5">
          <div class="rounded-[var(--radius)] border border-gray-200 dark:border-gray-800 p-6 bg-white dark:bg-gray-900 shadow-sm">
            <h2 class="text-2xl font-semibold mb-3">Sobre mí</h2>
            <p class="text-gray-600 dark:text-gray-300 leading-relaxed">
              Soy desarrollador .NET y me especializo en Blazor, APIs REST con ASP.NET Core y bases de datos SQL. Me gusta pensar y construir productos de principio a fin: arquitectura, datos, UI/UX y despliegue.
            </p>
            <ul class="mt-5 space-y-2 text-sm text-gray-700 dark:text-gray-300">
              <li class="flex items-center gap-2"><span class="size-1.5 rounded-full bg-blue-600"></span> Experiencia en multi‑tenant y JWT</li>
              <li class="flex items-center gap-2"><span class="size-1.5 rounded-full bg-blue-600"></span> Integración con Azure (Storage, App Service)</li>
              <li class="flex items-center gap-2"><span class="size-1.5 rounded-full bg-blue-600"></span> UX práctica y accesible</li>
            </ul>
          </div>
        </div>
        <div class="md:col-span-7 grid gap-6">
          <div class="rounded-[var(--radius)] border border-gray-200 dark:border-gray-800 p-6 bg-white dark:bg-gray-900 shadow-sm">
            <h3 class="font-semibold mb-2">Lo que puedo hacer por tu negocio</h3>
            <p class="text-gray-600 dark:text-gray-300">Catálogos B2B, POS multi‑sucursal, dashboards de ventas, automatizaciones y conectores entre plataformas. Entrego soluciones BBB: rápidas de usar, lindas y económicas de mantener.</p>
          </div>
          <div class="rounded-[var(--radius)] border border-gray-200 dark:border-gray-800 p-6 bg-white dark:bg-gray-900 shadow-sm">
            <h3 class="font-semibold mb-2">Disponibilidad</h3>
            <p class="text-gray-600 dark:text-gray-300">Proyectos cerrados o por horas. También puedo sumarme a tu equipo como refuerzo temporal.</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- SKILLS -->
  <section id="skills" class="py-16 bg-gray-50 dark:bg-gray-900 border-y border-gray-200 dark:border-gray-800">
    <div class="max-w-6xl mx-auto px-4">
      <h2 class="text-2xl md:text-3xl font-bold mb-8">Skills</h2>
      <div class="grid sm:grid-cols-2 lg:grid-cols-4 gap-4">
        <div class="rounded-xl border border-gray-200 dark:border-gray-800 p-4 bg-white dark:bg-gray-800">
          <h4 class="font-semibold mb-2">Backend</h4>
          <div class="flex flex-wrap gap-2 text-sm text-gray-700 dark:text-gray-300">
            <span class="px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700">.NET 6–9</span>
            <span class="px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700">ASP.NET Core</span>
            <span class="px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700">EF Core / Dapper</span>
            <span class="px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700">JWT</span>
          </div>
        </div>
        <div class="rounded-xl border border-gray-200 dark:border-gray-800 p-4 bg-white dark:bg-gray-800">
          <h4 class="font-semibold mb-2">Frontend</h4>
          <div class="flex flex-wrap gap-2 text-sm text-gray-700 dark:text-gray-300">
            <span class="px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700">Blazor</span>
            <span class="px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700">Tailwind</span>
            <span class="px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700">HTML</span>
            <span class="px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700">JavaScript</span>
          </div>
        </div>
        <div class="rounded-xl border border-gray-200 dark:border-gray-800 p-4 bg-white dark:bg-gray-800">
          <h4 class="font-semibold mb-2">Datos</h4>
          <div class="flex flex-wrap gap-2 text-sm text-gray-700 dark:text-gray-300">
            <span class="px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700">SQL Server</span>
            <span class="px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700">PostgreSQL</span>
            <span class="px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700">LINQ</span>
          </div>
        </div>
        <div class="rounded-xl border border-gray-200 dark:border-gray-800 p-4 bg-white dark:bg-gray-800">
          <h4 class="font-semibold mb-2">Cloud & DevOps</h4>
          <div class="flex flex-wrap gap-2 text-sm text-gray-700 dark:text-gray-300">
            <span class="px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700">Azure</span>
            <span class="px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700">CI/CD</span>
            <span class="px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700">GitHub Actions</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- PROYECTOS -->
  <section id="projects" class="py-16 md:py-24">
    <div class="max-w-6xl mx-auto px-4">
      <div class="flex items-end justify-between mb-8">
        <h2 class="text-2xl md:text-3xl font-bold">Proyectos destacados</h2>
        <a href="#contact" class="text-sm text-blue-700 dark:text-blue-400 hover:underline">¿Querés algo así?</a>
      </div>
      <div class="grid md:grid-cols-2 gap-6">
        <!-- Card 1 -->
        <article class="group rounded-[var(--radius)] border border-gray-200 dark:border-gray-800 overflow-hidden bg-white dark:bg-gray-900 shadow-sm">
          <div class="aspect-[16/9] bg-gradient-to-br from-blue-100 via-sky-100 to-cyan-100 dark:from-blue-900/30 dark:via-sky-900/30 dark:to-cyan-900/30 grid place-items-center">
            <span class="text-sm text-blue-700 dark:text-blue-300">POS Multi‑Tenant (Demo)</span>
          </div>
          <div class="p-5">
            <h3 class="font-semibold mb-2 group-hover:text-blue-700 dark:group-hover:text-blue-400">FacturArg · Punto de Venta</h3>
            <p class="text-gray-600 dark:text-gray-300 text-sm">Sistema de ventas con roles (Cajero, Gerente, SuperAdmin), stock, analíticas y facturación electrónica. Backend .NET 9 + PostgreSQL. Dashboard en MAUI/Blazor.</p>
            <div class="mt-3 flex flex-wrap gap-2 text-xs">
              <span class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full">.NET</span>
              <span class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full">EF Core</span>
              <span class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full">PostgreSQL</span>
            </div>
          </div>
        </article>
        <!-- Card 2 -->
        <article class="group rounded-[var(--radius)] border border-gray-200 dark:border-gray-800 overflow-hidden bg-white dark:bg-gray-900 shadow-sm">
          <div class="aspect-[16/9] bg-gradient-to-br from-indigo-100 via-blue-100 to-cyan-100 dark:from-indigo-900/30 dark:via-blue-900/30 dark:to-cyan-900/30 grid place-items-center">
            <span class="text-sm text-indigo-700 dark:text-indigo-300">Catálogo B2B + Integraciones</span>
          </div>
          <div class="p-5">
            <h3 class="font-semibold mb-2 group-hover:text-blue-700 dark:group-hover:text-blue-400">CRM Jurex · Conectores</h3>
            <p class="text-gray-600 dark:text-gray-300 text-sm">Integraciones con Mercado Libre, Shopify y Odoo. Normalización de datos, APIs y tableros de ventas. Ahorro de tiempo operativo y menos errores.</p>
            <div class="mt-3 flex flex-wrap gap-2 text-xs">
              <span class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full">ASP.NET Core</span>
              <span class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full">Azure</span>
              <span class="px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded-full">Tailwind</span>
            </div>
          </div>
        </article>
      </div>
    </div>
  </section>

  <!-- CONTACTO -->
  <section id="contact" class="py-16 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-800">
    <div class="max-w-3xl mx-auto px-4">
      <div class="rounded-[var(--radius)] border border-gray-200 dark:border-gray-800 p-6 md:p-8 shadow-sm bg-white dark:bg-gray-800">
        <h2 class="text-2xl font-bold mb-2">Hablemos</h2>
        <p class="text-gray-600 dark:text-gray-300 mb-6">Contame tu idea y vemos la forma más económica y fiable de llevarla a producción.</p>
        <form class="grid gap-4" onsubmit="sendMail(event)">
          <div class="grid sm:grid-cols-2 gap-4">
            <div>
              <label class="block text-sm text-gray-600 dark:text-gray-300 mb-1">Nombre</label>
              <input required type="text" class="w-full rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
            </div>
            <div>
              <label class="block text-sm text-gray-600 dark:text-gray-300 mb-1">Email</label>
              <input required type="email" class="w-full rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" />
            </div>
          </div>
          <div>
            <label class="block text-sm text-gray-600 dark:text-gray-300 mb-1">Mensaje</label>
            <textarea required rows="4" class="w-full rounded-lg border border-gray-300 dark:border-gray-600 dark:bg-gray-700 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"></textarea>
          </div>
          <div class="flex items-center justify-between">
            <p class="text-xs text-gray-500 dark:text-gray-400">Respuesta en menos de 24 h.</p>
            <button class="inline-flex items-center gap-2 rounded-full bg-blue-600 text-white px-5 py-2.5 hover:bg-blue-700 transition-colors">
              Enviar
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="size-4" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14M13 5l7 7-7 7"/></svg>
            </button>
          </div>
        </form>
      </div>
    </div>
  </section>

  <footer class="py-8 text-center text-sm text-gray-500 dark:text-gray-400">
    © <span id="y"></span> Ezequiel Ramírez · Hecho con Tailwind & cariño.
    <script>document.getElementById('y').textContent = new Date().getFullYear();</script>
  </footer>

<script>
  // Función para envío de formulario (placeholder)
  function sendMail(event) {
    event.preventDefault();
    alert('Formulario enviado (demo)');
  }

  // Menú móvil
  document.getElementById('menuBtn').addEventListener('click', function() {
    const menu = document.getElementById('mobileMenu');
    menu.classList.toggle('hidden');
  });

  // Sistema de temas - VERSIÓN ARREGLADA
  (function(){
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');
    const menu = document.getElementById('theme-menu');
    const btn  = document.getElementById('theme-btn');
    const list = document.getElementById('theme-list');
    const icon = document.getElementById('theme-icon');

    const icons = {
      light: '<svg class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor"><path d="M12 18a6 6 0 1 0 0-12a6 6 0 0 0 0 12Z"/></svg>',
      dark:  '<svg class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor"><path d="M21 12.79A9 9 0 1 1 11.21 3A7 7 0 0 0 21 12.79Z"/></svg>',
      system:'<svg class="h-5 w-5" viewBox="0 0 24 24" fill="currentColor"><path d="M4 6h16v9H4zM2 18h20v2H2z"/></svg>',
    };

    function apply(theme){
      const root = document.documentElement;
      // AQUÍ ESTABA EL PROBLEMA - Arreglado:
      if (theme === 'dark') {
        root.classList.add('dark');
        icon.innerHTML = icons.dark;
      } else if (theme === 'light') {
        root.classList.remove('dark');
        icon.innerHTML = icons.light;
      } else if (theme === 'system') {
        if (prefersDark.matches) {
          root.classList.add('dark');
          icon.innerHTML = icons.system;
        } else {
          root.classList.remove('dark');
          icon.innerHTML = icons.system;
        }
      }
    }

    function setTheme(t){
      localStorage.setItem('theme', t);
      apply(t);
      
      // Si es system, escuchar cambios del sistema
      if (t === 'system') {
        prefersDark.addEventListener('change', () => apply('system'));
      }
    }

    // Estado inicial del ícono
    const currentTheme = localStorage.getItem('theme') || 'system';
    apply(currentTheme);

    // Abrir/cerrar dropdown
    btn.addEventListener('click', () => {
      const isOpen = list.dataset.open === '1';
      list.dataset.open = isOpen ? '0' : '1';
      list.classList.toggle('invisible', isOpen);
      list.classList.toggle('opacity-0', isOpen);
      list.classList.toggle('pointer-events-none', isOpen);
    });

    // Cerrar dropdown si se hace clic fuera
    document.addEventListener('click', (e)=>{
      if(!menu.contains(e.target)){
        list.dataset.open = '0';
        list.classList.add('invisible','opacity-0','pointer-events-none');
      }
    });

    // Manejar clic en opciones del dropdown
    list.querySelectorAll('button[data-theme]').forEach(button => {
      button.addEventListener('click', () => {
        const selectedTheme = button.getAttribute('data-theme');
        setTheme(selectedTheme);
        
        // Cerrar dropdown
        list.dataset.open = '0';
        list.classList.add('invisible','opacity-0','pointer-events-none');
      });
    });

    // Sincronizar con cambios del sistema solo si el tema actual es 'system'
    prefersDark.addEventListener('change', () => {
      const saved = localStorage.getItem('theme') || 'system';
      if (saved === 'system') {
        apply('system');
      }
    });
  })();
</script>


</body>
</html>
